[Unit]
Description=Voice wakeword daemon (openWakeWord)
After=graphical-session.target voice-hotkey.service

[Service]
Type=simple
ExecStart=%h/.venvs/voice/bin/python <REPO_DIR>/voice-hotkey.py --wakeword-daemon
Restart=on-failure
RestartSec=1
Environment=VOICE_AUDIO_BACKEND=pulse
Environment=VOICE_AUDIO_SOURCE=default
# Keep wakeword disabled by default; enable with:
# <REPO_DIR>/voice-hotkey.py --input wakeword-enable
# or set this env var to true.
Environment=VOICE_WAKEWORD_ENABLED=false
Environment=VOICE_WAKEWORD_MODEL_PATH=%h/.config/hypr-voice-controls/wakeword/
Environment=VOICE_WAKEWORD_THRESHOLD=0.72
Environment=VOICE_WAKEWORD_MIN_CONSECUTIVE=3
Environment=VOICE_WAKEWORD_COOLDOWN_MS=3000
Environment=VOICE_WAKEWORD_NO_SPEECH_REARM_MS=5000
Environment=VOICE_WAKEWORD_FRAME_MS=40
Environment=VOICE_WAKEWORD_PREROLL_MS=200

[Install]
WantedBy=default.target
